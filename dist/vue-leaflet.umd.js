(function(y,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(y=typeof globalThis<"u"?globalThis:y||self,n(y["vue-leaflet"]={},y.Vue))})(this,function(y,n){"use strict";const te=(e,o)=>{for(const t of Object.keys(o))e.on(t,o[t])},oe=e=>{for(const o of Object.keys(e)){const t=e[o];t&&w(t.cancel)&&t.cancel()}},Ae=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),w=e=>typeof e=="function",L=(e,o,t)=>{for(const r in t){const a="set"+Ae(r);e[a]?n.watch(()=>t[r],(s,i)=>{e[a](s,i)}):o[a]&&n.watch(()=>t[r],s=>{o[a](s)})}},O=(e,o,t={})=>{const r=Object.assign({},t);for(const a in e){const s=o[a],i=e[a];s&&(s&&s.custom===!0||i!==void 0&&(r[a]=i))}return r},S=e=>{const o={},t={};for(const r in e)if(r.startsWith("on")&&!r.startsWith("onUpdate")&&r!=="onReady"){const a=r.slice(2).toLocaleLowerCase();o[a]=e[r]}else t[r]=e[r];return{listeners:o,attrs:t}},ze=async e=>{const o=await Promise.all([import("leaflet/dist/images/marker-icon-2x.png"),import("leaflet/dist/images/marker-icon.png"),import("leaflet/dist/images/marker-shadow.png")]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},Z=e=>{const o=n.ref((...r)=>console.warn(`Method ${e} has been invoked without being replaced`)),t=(...r)=>o.value(...r);return t.wrapped=o,n.provide(e,t),t},E=(e,o)=>e.wrapped.value=o,f=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,m=e=>{const o=n.inject(e);if(o===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return o},nt=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:f,assertInject:m,bindEventHandlers:te,cancelDebounces:oe,capitalizeFirstLetter:Ae,isFunction:w,propsBinder:L,propsToLeafletOptions:O,provideLeafletWrapper:Z,remapEvents:S,resetWebpackIcon:ze,updateLeafletWrapper:E},Symbol.toStringTag,{value:"Module"})),j=Symbol("useGlobalLeaflet"),_=Symbol("addLayer"),H=Symbol("removeLayer"),z=Symbol("registerControl"),ne=Symbol("registerLayerControl"),re=Symbol("canSetParentHtml"),se=Symbol("setParentHtml"),ae=Symbol("setIcon"),le=Symbol("bindPopup"),ie=Symbol("bindTooltip"),ce=Symbol("unbindPopup"),ue=Symbol("unbindTooltip"),rt=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:_,BindPopupInjection:le,BindTooltipInjection:ie,CanSetParentHtmlInjection:re,RegisterControlInjection:z,RegisterLayerControlInjection:ne,RemoveLayerInjection:H,SetIconInjection:ae,SetParentHtmlInjection:se,UnbindPopupInjection:ce,UnbindTooltipInjection:ue,UseGlobalLeafletInjection:j},Symbol.toStringTag,{value:"Module"})),N={options:{type:Object,default:()=>({}),custom:!0}},$=e=>({options:e.options,methods:{}}),st=Object.freeze(Object.defineProperty({__proto__:null,componentProps:N,setupComponent:$},Symbol.toStringTag,{value:"Module"})),G=Object.assign({},N,{pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}}),U=(e,o,t)=>{const r=m(_),a=m(H),{options:s,methods:i}=$(e),l=O(e,G,s),c=()=>r({leafletObject:o.value}),u=()=>a({leafletObject:o.value}),d=Object.assign({},i,{setAttribution(b){u(),o.value.options.attribution=b,e.visible&&c()},setName(){u(),e.visible&&c()},setLayerType(){u(),e.visible&&c()},setVisible(b){o.value&&(b?c():u())},bindPopup(b){if(!o.value||!w(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(b)},bindTooltip(b){if(!o.value||!w(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(b)},unbindTooltip(){o.value&&(w(o.value.closeTooltip)&&o.value.closeTooltip(),w(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(w(o.value.closePopup)&&o.value.closePopup(),w(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(b){t.emit("update:visible",b)}});return n.provide(le,d.bindPopup),n.provide(ie,d.bindTooltip),n.provide(ce,d.unbindPopup),n.provide(ue,d.unbindTooltip),n.onUnmounted(()=>{d.unbindPopup(),d.unbindTooltip(),u()}),{options:l,methods:d}},M=(e,o)=>{if(e&&o.default)return n.h("div",{style:{display:"none"}},o.default())},at=Object.freeze(Object.defineProperty({__proto__:null,layerProps:G,render:M,setupLayer:U},Symbol.toStringTag,{value:"Module"})),de=Object.assign({},G,{interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}}),Ne=(e,o,t)=>{const{options:r,methods:a}=U(e,o,t);return{options:O(e,de,r),methods:a}},lt=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:de,setupInteractiveLayer:Ne},Symbol.toStringTag,{value:"Module"})),Q=Object.assign({},de,{stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}}),pe=(e,o,t)=>{const{options:r,methods:a}=Ne(e,o,t),s=O(e,Q,r),i=m(H),l=Object.assign({},a,{setStroke(c){o.value.setStyle({stroke:c})},setColor(c){o.value.setStyle({color:c})},setWeight(c){o.value.setStyle({weight:c})},setOpacity(c){o.value.setStyle({opacity:c})},setLineCap(c){o.value.setStyle({lineCap:c})},setLineJoin(c){o.value.setStyle({lineJoin:c})},setDashArray(c){o.value.setStyle({dashArray:c})},setDashOffset(c){o.value.setStyle({dashOffset:c})},setFill(c){o.value.setStyle({fill:c})},setFillColor(c){o.value.setStyle({fillColor:c})},setFillOpacity(c){o.value.setStyle({fillOpacity:c})},setFillRule(c){o.value.setStyle({fillRule:c})},setClassName(c){o.value.setStyle({className:c})}});return n.onBeforeUnmount(()=>{i({leafletObject:o.value})}),{options:s,methods:l}},it=Object.freeze(Object.defineProperty({__proto__:null,pathProps:Q,setupPath:pe},Symbol.toStringTag,{value:"Module"})),V=Object.assign({},Q,{radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}}),ye=(e,o,t)=>{const{options:r,methods:a}=pe(e,o,t),s=O(e,V,r),i=Object.assign({},a,{setRadius(l){o.value.setRadius(l)},setLatLng(l){o.value.setLatLng(l)}});return{options:s,methods:i}},ct=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:V,setupCircleMarker:ye},Symbol.toStringTag,{value:"Module"})),me=Object.assign({},V,{radius:{type:Number}}),$e=(e,o,t)=>{const{options:r,methods:a}=ye(e,o,t),s=O(e,me,r),i=Object.assign({},a);return{options:s,methods:i}},ut=Object.freeze(Object.defineProperty({__proto__:null,circleProps:me,setupCircle:$e},Symbol.toStringTag,{value:"Module"})),dt=n.defineComponent({name:"LCircle",props:me,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{options:i,methods:l}=$e(e,t,o);return n.onMounted(async()=>{const{circle:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.latLng)return console.error("LCircle: latLng prop is required");t.value=n.markRaw(c(e.latLng,i));const{listeners:u}=S(o.attrs);t.value.on(u),L(l,t.value,e),s(Object.assign({leafletObject:t.value},e,l)),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),pt=n.defineComponent({name:"LCircleMarker",props:V,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{options:i,methods:l}=ye(e,t,o);return n.onMounted(async()=>{const{circleMarker:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.latLng)return console.error("LCircleMarker: latLng prop is required");t.value=n.markRaw(c(e.latLng,i));const{listeners:u}=S(o.attrs);t.value.on(u),L(l,t.value,e),s(Object.assign({},e,l,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),A=Object.assign({},N,{position:{type:String}}),q=(e,o)=>{const{options:t,methods:r}=$(e),a=O(e,A,t),s=Object.assign({},r,{setPosition(i){o.value&&o.value.setPosition(i)}});return n.onUnmounted(()=>{o.value&&o.value.remove()}),{options:a,methods:s}},Ue=e=>e.default?n.h("div",{ref:"root"},e.default()):null,yt=Object.freeze(Object.defineProperty({__proto__:null,controlProps:A,renderLControl:Ue,setupControl:q},Symbol.toStringTag,{value:"Module"})),mt=n.defineComponent({name:"LControl",props:Object.assign({disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1},controlProps:A}),setup(e,o){const t=n.ref(),r=n.ref(),a=n.inject(j),s=m(z),{options:i,methods:l}=q(e,t);return n.onMounted(async()=>{const{Control:c,DomEvent:u}=a?f.L:await import("leaflet/dist/leaflet-src.esm"),d=c.extend({onAdd(){return r.value}});t.value=n.markRaw(new d(i)),L(l,t.value,e),s({leafletObject:t.value}),e.disableClickPropagation&&r.value&&u.disableClickPropagation(r.value),e.disableScrollPropagation&&r.value&&u.disableScrollPropagation(r.value),n.nextTick(()=>o.emit("ready",t.value))}),{root:r,leafletObject:t}},render(){return Ue(this.$slots)}}),be=Object.assign({},A,{prefix:{type:String}}),qe=(e,o)=>{const{options:t,methods:r}=q(e,o),a=O(e,be,t),s=Object.assign({},r,{setPrefix(i){o.value.setPrefix(i)}});return{options:a,methods:s}},bt=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:be,setupControlAttribution:qe},Symbol.toStringTag,{value:"Module"})),ft=n.defineComponent({name:"LControlAttribution",props:be,setup(e,o){const t=n.ref(),r=n.inject(j),a=m(z),{options:s,methods:i}=qe(e,t);return n.onMounted(async()=>{const{control:l}=r?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.attribution(s)),L(i,t.value,e),a({leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),fe=Object.assign({},A,{collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}}),De=(e,o)=>{const{options:t}=q(e,o);return{options:O(e,fe,t),methods:{addLayer(s){s.layerType==="base"?o.value.addBaseLayer(s.leafletObject,s.name):s.layerType==="overlay"&&o.value.addOverlay(s.leafletObject,s.name)},removeLayer(s){o.value.removeLayer(s.leafletObject)}}}},gt=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:fe,setupControlLayers:De},Symbol.toStringTag,{value:"Module"})),Ot=n.defineComponent({name:"LControlLayers",props:fe,setup(e,o){const t=n.ref(),r=n.inject(j),a=m(ne),{options:s,methods:i}=De(e,t);return n.onMounted(async()=>{const{control:l}=r?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.layers(void 0,void 0,s)),L(i,t.value,e),a(Object.assign({},e,i,{leafletObject:t.value})),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),ge=Object.assign({},A,{maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}}),Fe=(e,o)=>{const{options:t,methods:r}=q(e,o);return{options:O(e,ge,t),methods:r}},Lt=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:ge,setupControlScale:Fe},Symbol.toStringTag,{value:"Module"})),jt=n.defineComponent({name:"LControlScale",props:ge,setup(e,o){const t=n.ref(),r=n.inject(j),a=m(z),{options:s,methods:i}=Fe(e,t);return n.onMounted(async()=>{const{control:l}=r?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.scale(s)),L(i,t.value,e),a({leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),Oe=Object.assign({},A,{zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}}),Ze=(e,o)=>{const{options:t,methods:r}=q(e,o);return{options:O(e,Oe,t),methods:r}},ht=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:Oe,setupControlZoom:Ze},Symbol.toStringTag,{value:"Module"})),vt=n.defineComponent({name:"LControlZoom",props:Oe,setup(e,o){const t=n.ref(),r=n.inject(j),a=m(z),{options:s,methods:i}=Ze(e,t);return n.onMounted(async()=>{const{control:l}=r?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.zoom(s)),L(i,t.value,e),a({leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),W=Object.assign({},G),X=(e,o,t)=>{const{options:r,methods:a}=U(e,o,t),s=O(e,W,r),i=Object.assign({},a,{addLayer(l){o.value.addLayer(l.leafletObject)},removeLayer(l){o.value.removeLayer(l.leafletObject)}});return n.provide(_,i.addLayer),n.provide(H,i.removeLayer),{options:s,methods:i}},St=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:W,setupLayerGroup:X},Symbol.toStringTag,{value:"Module"})),Le=Object.assign({},W),Ee=(e,o,t)=>{const{options:r,methods:a}=X(e,o,t),s=O(e,Le,r),i=Object.assign({},a);return{options:s,methods:i}},_t=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:Le,setupFeatureGroup:Ee},Symbol.toStringTag,{value:"Module"})),Ct=n.defineComponent({props:Le,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{methods:i,options:l}=Ee(e,t,o);return n.onMounted(async()=>{const{featureGroup:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(void 0,l));const{listeners:u}=S(o.attrs);t.value.on(u),L(i,t.value,e),s(Object.assign({},e,i,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),je=Object.assign({},W,{geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}}),He=(e,o,t)=>{const{options:r,methods:a}=X(e,o,t),s=O(e,je,r);Object.prototype.hasOwnProperty.call(e,"optionsStyle")&&(s.style=e.optionsStyle);const i=Object.assign({},a,{setGeojson(l){o.value.clearLayers(),o.value.addData(l)},setOptionsStyle(l){o.value.setStyle(l)},getGeoJSONData(){return o.value.toGeoJSON()},getBounds(){return o.value.getBounds()}});return{options:s,methods:i}},Tt=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:je,setupGeoJSON:He},Symbol.toStringTag,{value:"Module"})),Pt=n.defineComponent({props:je,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{methods:i,options:l}=He(e,t,o);return n.onMounted(async()=>{const{geoJSON:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.geojson,l));const{listeners:u}=S(o.attrs);t.value.on(u),L(i,t.value,e),s(Object.assign({},e,i,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Y=Object.assign({},G,{opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}}),he=(e,o,t)=>{const{options:r,methods:a}=U(e,o,t),s=O(e,Y,r),i=Object.assign({},a,{setTileComponent(){var l;(l=o.value)==null||l.redraw()}});return n.onUnmounted(()=>{o.value.off()}),{options:s,methods:i}},We=(e,o,t,r)=>e.extend({initialize(a){this.tileComponents={},this.on("tileunload",this._unloadTile),t.setOptions(this,a)},createTile(a){const s=this._tileCoordsToKey(a);this.tileComponents[s]=o.create("div");const i=n.h({setup:r,props:["coords"]},{coords:a});return n.render(i,this.tileComponents[s]),this.tileComponents[s]},_unloadTile(a){const s=this._tileCoordsToKey(a.coords);this.tileComponents[s]&&(this.tileComponents[s].innerHTML="",this.tileComponents[s]=void 0)}}),Mt=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:We,gridLayerProps:Y,setupGridLayer:he},Symbol.toStringTag,{value:"Module"})),wt=n.defineComponent({props:Object.assign({},Y,{childRender:{type:Function,required:!0}}),setup(e,o){const t=n.ref(),r=n.ref(null),a=n.ref(!1),s=n.inject(j),i=m(_),{options:l,methods:c}=he(e,t,o);return n.onMounted(async()=>{const{GridLayer:u,DomUtil:d,Util:b}=s?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.childRender)return console.error("LGridLayer: childRender prop is required");const T=We(u,d,b,e.childRender);t.value=n.markRaw(new T(l));const{listeners:g}=S(o.attrs);t.value.on(g),L(c,t.value,e),i(Object.assign({},e,c,{leafletObject:t.value})),a.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{root:r,ready:a,leafletObject:t}},render(){return this.ready?n.h("div",{style:{display:"none"},ref:"root"}):null}}),ve={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},kt=Object.freeze(Object.defineProperty({__proto__:null,iconProps:ve},Symbol.toStringTag,{value:"Module"})),Bt=n.defineComponent({name:"LIcon",props:Object.assign({},ve,N),setup(e,o){const t=n.ref(),r=n.inject(j),a=m(re),s=m(se),i=m(ae);let l,c,u,d,b;const T=(B,h,C)=>{const P=B&&B.innerHTML;if(!h){C&&b&&a()&&s(P);return}const{listeners:F}=S(o.attrs);b&&c(b,F);const{options:Ge}=$(e),I=O(e,ve,Ge);P&&(I.html=P),b=I.html?u(I):d(I),l(b,F),i(b)},g=()=>{n.nextTick(()=>T(t.value,!0,!1))},k=()=>{n.nextTick(()=>T(t.value,!1,!0))},D={setIconUrl:g,setIconRetinaUrl:g,setIconSize:g,setIconAnchor:g,setPopupAnchor:g,setTooltipAnchor:g,setShadowUrl:g,setShadowRetinaUrl:g,setShadowAnchor:g,setBgPos:g,setClassName:g,setHtml:g};return n.onMounted(async()=>{const{DomEvent:B,divIcon:h,icon:C}=r?f.L:await import("leaflet/dist/leaflet-src.esm");l=B.on,c=B.off,u=h,d=C,L(D,{},e),new MutationObserver(k).observe(t.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),g()}),{root:t}},render(){const e=this.$slots.default?this.$slots.default():void 0;return n.h("div",{ref:"root"},e)}}),Se=Object.assign({},G,{opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}}),Je=(e,o,t)=>{const{options:r,methods:a}=U(e,o,t),s=O(e,Se,r),i=Object.assign({},a,{setOpacity(l){return o.value.setOpacity(l)},setUrl(l){return o.value.setUrl(l)},setBounds(l){return o.value.setBounds(l)},getBounds(){return o.value.getBounds()},getElement(){return o.value.getElement()},bringToFront(){return o.value.bringToFront()},bringToBack(){return o.value.bringToBack()},setZIndex(l){return o.value.setZIndex(l)}});return{options:s,methods:i}},It=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Se,setupImageOverlay:Je},Symbol.toStringTag,{value:"Module"})),Gt=n.defineComponent({name:"LImageOverlay",props:Se,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{options:i,methods:l}=Je(e,t,o);return n.onMounted(async()=>{const{imageOverlay:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.url)return console.error("LImageOverlay: url prop is required");if(!e.bounds)return console.error("LImageOverlay: bounds prop is required");t.value=n.markRaw(c(e.url,e.bounds,i));const{listeners:u}=S(o.attrs);t.value.on(u),L(l,t.value,e),s(Object.assign({},e,l,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),At=n.defineComponent({props:W,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{methods:i}=X(e,t,o);return n.onMounted(async()=>{const{layerGroup:l}=a?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l(void 0,e.options));const{listeners:c}=S(o.attrs);t.value.on(c),L(i,t.value,e),s(Object.assign({},e,i,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}});function Ke(e,o,t){var r,a,s;o===void 0&&(o=50),t===void 0&&(t={});var i=(r=t.isImmediate)!=null&&r,l=(a=t.callback)!=null&&a,c=t.maxWait,u=Date.now(),d=[];function b(){if(c!==void 0){var g=Date.now()-u;if(g+o>=c)return c-g}return o}var T=function(){var g=[].slice.call(arguments),k=this;return new Promise(function(D,B){var h=i&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,u=Date.now(),!i){var P=e.apply(k,g);l&&l(P),d.forEach(function(F){return(0,F.resolve)(P)}),d=[]}},b()),h){var C=e.apply(k,g);return l&&l(C),D(C)}d.push({resolve:D,reject:B})})};return T.cancel=function(g){s!==void 0&&clearTimeout(s),d.forEach(function(k){return(0,k.reject)(g)}),d=[]},T}const Re=Object.assign({},N,{center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}}),zt=n.defineComponent({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Re,setup(e,o){const t=n.ref(),r=n.reactive({ready:!1,layersToAdd:[],layersInControl:[]}),{options:a}=$(e),s=O(e,Re,a),{listeners:i,attrs:l}=S(o.attrs),c=Z(_),u=Z(H),d=Z(z),b=Z(ne);n.provide(j,e.useGlobalLeaflet);const T=n.computed(()=>{const h={};return e.noBlockingAnimations&&(h.animate=!1),h}),g=n.computed(()=>{const h=T.value;return e.padding&&(h.padding=e.padding),e.paddingTopLeft&&(h.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(h.paddingBottomRight=e.paddingBottomRight),h}),k={moveend:Ke(h=>{r.leafletRef&&(o.emit("update:zoom",r.leafletRef.getZoom()),o.emit("update:center",r.leafletRef.getCenter()),o.emit("update:bounds",r.leafletRef.getBounds()))}),overlayadd(h){const C=r.layersInControl.find(P=>P.name===h.name);C&&C.updateVisibleProp(!0)},overlayremove(h){const C=r.layersInControl.find(P=>P.name===h.name);C&&C.updateVisibleProp(!1)}};n.onMounted(async()=>{e.useGlobalLeaflet&&(f.L=f.L||await import("leaflet"));const{map:h,CRS:C,Icon:P,latLngBounds:F,latLng:Ge,stamp:I}=e.useGlobalLeaflet?f.L:await import("leaflet/dist/leaflet-src.esm");try{s.beforeMapMount&&await s.beforeMapMount()}catch(p){console.error(`The following error occurred running the provided beforeMapMount hook ${p.message}`)}await ze(P);const no=typeof s.crs=="string"?C[s.crs]:s.crs;s.crs=no||C.EPSG3857;const K={addLayer(p){p.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd.push(p):r.layersInControl.find(R=>I(R.leafletObject)===I(p.leafletObject))||(r.layerControl.addLayer(p),r.layersInControl.push(p))),p.visible!==!1&&r.leafletRef.addLayer(p.leafletObject)},removeLayer(p){p.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd=r.layersToAdd.filter(v=>v.name!==p.name):(r.layerControl.removeLayer(p.leafletObject),r.layersInControl=r.layersInControl.filter(v=>I(v.leafletObject)!==I(p.leafletObject)))),r.leafletRef.removeLayer(p.leafletObject)},registerLayerControl(p){r.layerControl=p,r.layersToAdd.forEach(v=>{r.layerControl.addLayer(v)}),r.layersToAdd=[],d(p)},registerControl(p){r.leafletRef.addControl(p.leafletObject)},setZoom(p){const v=r.leafletRef.getZoom();p!==v&&r.leafletRef.setZoom(p,T.value)},setCrs(p){const v=r.leafletRef.getBounds();r.leafletRef.options.crs=p,r.leafletRef.fitBounds(v,{animate:!1,padding:[0,0]})},fitBounds(p){r.leafletRef.fitBounds(p,g.value)},setBounds(p){if(!p)return;const v=F(p);if(!v.isValid())return;!(r.lastSetBounds||r.leafletRef.getBounds()).equals(v,0)&&(r.lastSetBounds=v,r.leafletRef.fitBounds(v))},setCenter(p){if(p==null)return;const v=Ge(p),R=r.lastSetCenter||r.leafletRef.getCenter();(R.lat!==v.lat||R.lng!==v.lng)&&(r.lastSetCenter=v,r.leafletRef.panTo(v,T.value))}};E(c,K.addLayer),E(u,K.removeLayer),E(d,K.registerControl),E(b,K.registerLayerControl),r.leafletRef=n.markRaw(h(t.value,s)),L(K,r.leafletRef,e),te(r.leafletRef,k),te(r.leafletRef,i),r.ready=!0,n.nextTick(()=>o.emit("ready",r.leafletRef))}),n.onBeforeUnmount(()=>{oe(k),r.leafletRef&&(r.leafletRef.off(),r.leafletRef.remove())});const D=n.computed(()=>r.leafletRef),B=n.computed(()=>r.ready);return{root:t,ready:B,leafletObject:D,attrs:l}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),n.h("div",Object.assign({},e,{ref:"root"}),this.ready&&this.$slots.default?this.$slots.default():{})}}),Nt=["Symbol(Comment)","Symbol(Text)"],$t=["LTooltip","LPopup"],_e=Object.assign({},G,{draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}}),Qe=(e,o,t)=>{const{options:r,methods:a}=U(e,o,t),s=O(e,_e,r),i=Object.assign({},a,{setDraggable(l){o.value.dragging&&(l?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(l){t.emit("update:latLng",l.latlng),t.emit("update:lat-lng",l.latlng)},setLatLng(l){if(l!=null&&o.value){const c=o.value.getLatLng();(!c||!c.equals(l))&&o.value.setLatLng(l)}}});return{options:s,methods:i}},Ve=(e,o)=>{const t=o.slots.default&&o.slots.default();return t&&t.length&&t.some(Ut)};function Ut(e){return!(Nt.includes(e.type.toString())||$t.includes(e.type.name))}const qt=Object.freeze(Object.defineProperty({__proto__:null,markerProps:_e,setupMarker:Qe,shouldBlankIcon:Ve},Symbol.toStringTag,{value:"Module"})),Dt=n.defineComponent({name:"LMarker",props:_e,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_);n.provide(re,()=>{var u;return!!((u=t.value)!=null&&u.getElement())}),n.provide(se,u=>{var b,T;const d=w((b=t.value)==null?void 0:b.getElement)&&((T=t.value)==null?void 0:T.getElement());d&&(d.innerHTML=u)}),n.provide(ae,u=>{var d;return((d=t.value)==null?void 0:d.setIcon)&&t.value.setIcon(u)});const{options:i,methods:l}=Qe(e,t,o),c={moveHandler:Ke(l.latLngSync)};return n.onMounted(async()=>{const{marker:u,divIcon:d}=a?f.L:await import("leaflet/dist/leaflet-src.esm");if(Ve(i,o)&&(i.icon=d({className:""})),!e.latLng)return console.error("LMarker: latLng prop is required");t.value=n.markRaw(u(e.latLng,i));const{listeners:b}=S(o.attrs);t.value.on(b),t.value.on("move",c.moveHandler),L(l,t.value,e),s(Object.assign({},e,l,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),n.onBeforeUnmount(()=>oe(c)),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),x=Object.assign({},Q,{smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}}),Ce=(e,o,t)=>{const{options:r,methods:a}=pe(e,o,t),s=O(e,x,r),i=Object.assign({},a,{setSmoothFactor(l){o.value.setStyle({smoothFactor:l})},setNoClip(l){o.value.setStyle({noClip:l})},addLatLng(l){o.value.addLatLng(l)}});return{options:s,methods:i}},Ft=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:x,setupPolyline:Ce},Symbol.toStringTag,{value:"Module"})),J=Object.assign({},x),Te=(e,o,t)=>{const{options:r,methods:a}=Ce(e,o,t),s=O(e,J,r),i=Object.assign({},a,{toGeoJSON(l){return o.value.toGeoJSON(l)}});return{options:s,methods:i}},Zt=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:J,setupPolygon:Te},Symbol.toStringTag,{value:"Module"})),Et=n.defineComponent({name:"LPolygon",props:J,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{options:i,methods:l}=Te(e,t,o);return n.onMounted(async()=>{const{polygon:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.latLngs)return console.error("LPolygon: latLngs prop is required");t.value=n.markRaw(c(e.latLngs,i));const{listeners:u}=S(o.attrs);t.value.on(u),L(l,t.value,e),s(Object.assign({},e,l,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Ht=n.defineComponent({name:"LPolyline",props:x,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{options:i,methods:l}=Ce(e,t,o);return n.onMounted(async()=>{const{polyline:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.latLngs)return console.error("LPolyline: latLngs prop is required");t.value=n.markRaw(c(e.latLngs,i));const{listeners:u}=S(o.attrs);t.value.on(u),L(l,t.value,e),s(Object.assign({},e,l,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Pe=Object.assign({},N,{content:{type:String,default:null}}),Me=(e,o)=>{const{options:t,methods:r}=$(e),a=Object.assign({},r,{setContent(s){o.value&&s!==null&&s!==void 0&&o.value.setContent(s)}});return{options:t,methods:a}},we=e=>e.default?n.h("div",{ref:"root"},e.default()):null,Wt=Object.freeze(Object.defineProperty({__proto__:null,popperProps:Pe,render:we,setupPopper:Me},Symbol.toStringTag,{value:"Module"})),Xe=Object.assign({},Pe,{latLng:{type:[Object,Array],default:()=>[]}}),Ye=(e,o)=>{const{options:t,methods:r}=Me(e,o);return{options:t,methods:r}},Jt=Object.freeze(Object.defineProperty({__proto__:null,popupProps:Xe,setupPopup:Ye},Symbol.toStringTag,{value:"Module"})),Kt=n.defineComponent({name:"LPopup",props:Xe,setup(e,o){const t=n.ref(),r=n.ref(null),a=n.inject(j),s=m(le),i=m(ce),{options:l,methods:c}=Ye(e,t);return n.onMounted(async()=>{const{popup:u}=a?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(u(l)),e.latLng!==void 0&&t.value.setLatLng(e.latLng),L(c,t.value,e);const{listeners:d}=S(o.attrs);t.value.on(d),t.value.setContent(e.content||r.value||""),s(t.value),n.nextTick(()=>o.emit("ready",t.value))}),n.onBeforeUnmount(()=>{i()}),{root:r,leafletObject:t}},render(){return we(this.$slots)}}),ke=Object.assign({},J,{latLngs:Object.assign({},J.latLngs,{required:!1}),bounds:{type:Object,custom:!0}}),xe=(e,o,t)=>{const{options:r,methods:a}=Te(e,o,t),s=O(e,ke,r),i=Object.assign({},a,{setBounds(l){o.value.setBounds(l)},setLatLngs(l){o.value.setBounds(l)}});return{options:s,methods:i}},Rt=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:ke,setupRectangle:xe},Symbol.toStringTag,{value:"Module"})),Qt=n.defineComponent({name:"LRectangle",props:ke,setup(e,o){const t=n.ref(),r=n.ref(!1),a=n.inject(j),s=m(_),{options:i,methods:l}=xe(e,t,o);return n.onMounted(async()=>{const{rectangle:c,latLngBounds:u}=a?f.L:await import("leaflet/dist/leaflet-src.esm"),d=e.bounds?u(e.bounds):u(e.latLngs||[]);t.value=n.markRaw(c(d,i));const{listeners:b}=S(o.attrs);t.value.on(b),L(l,t.value,e),s(Object.assign({},e,l,{leafletObject:t.value})),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),ee=Object.assign({},Y,{tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}}),Be=(e,o,t)=>{const{options:r,methods:a}=he(e,o,t),s=O(e,ee,r),i=Object.assign({},a);return{options:s,methods:i}},Vt=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:Be,tileLayerProps:ee},Symbol.toStringTag,{value:"Module"})),Xt=n.defineComponent({props:ee,setup(e,o){const t=n.ref(),r=n.inject(j),a=m(_),{options:s,methods:i}=Be(e,t,o);return n.onMounted(async()=>{const{tileLayer:l}=r?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.url)return console.error("LTileLayer: url prop is required");t.value=n.markRaw(l(e.url,s));const{listeners:c}=S(o.attrs);t.value.on(c),L(i,t.value,e),a(Object.assign({},e,i,{leafletObject:t.value})),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),et=Object.assign({},Pe),tt=(e,o)=>{const{options:t,methods:r}=Me(e,o),a=m(ue);return n.onBeforeUnmount(()=>{a()}),{options:t,methods:r}},Yt=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:tt,tooltipProps:et},Symbol.toStringTag,{value:"Module"})),xt=n.defineComponent({name:"LTooltip",props:et,setup(e,o){const t=n.ref(),r=n.ref(null),a=n.inject(j),s=m(ie),{options:i,methods:l}=tt(e,t);return n.onMounted(async()=>{const{tooltip:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(i)),L(l,t.value,e);const{listeners:u}=S(o.attrs);t.value.on(u),t.value.setContent(e.content||r.value||""),s(t.value),n.nextTick(()=>o.emit("ready",t.value))}),{root:r,leafletObject:t}},render(){return we(this.$slots)}}),Ie=Object.assign({},ee,{layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}}),ot=(e,o,t)=>{const{options:r,methods:a}=Be(e,o,t);return{options:O(e,Ie,r),methods:Object.assign({},a)}},eo=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:ot,wmsTileLayerProps:Ie},Symbol.toStringTag,{value:"Module"})),to=n.defineComponent({props:Ie,setup(e,o){const t=n.ref(),r=n.inject(j),a=m(_),{options:s,methods:i}=ot(e,t,o);return n.onMounted(async()=>{const{tileLayer:l}=r?f.L:await import("leaflet/dist/leaflet-src.esm");if(!e.url)throw new Error("url is required");t.value=n.markRaw(l.wms(e.url,s));const{listeners:c}=S(o.attrs);t.value.on(c),L(i,t.value,e),a(Object.assign({},e,i,{leafletObject:t.value})),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),oo=Object.freeze(Object.defineProperty({__proto__:null,Circle:ut,CircleMarker:ct,Component:st,Control:yt,ControlAttribution:bt,ControlLayers:gt,ControlScale:Lt,ControlZoom:ht,FeatureGroup:_t,GeoJSON:Tt,GridLayer:Mt,Icon:kt,ImageOverlay:It,InteractiveLayer:lt,Layer:at,LayerGroup:St,Marker:qt,Path:it,Polygon:Zt,Polyline:Ft,Popper:Wt,Popup:Jt,Rectangle:Rt,TileLayer:Vt,Tooltip:Yt,WmsTileLayer:eo},Symbol.toStringTag,{value:"Module"}));y.Functions=oo,y.InjectionKeys=rt,y.LCircle=dt,y.LCircleMarker=pt,y.LControl=mt,y.LControlAttribution=ft,y.LControlLayers=Ot,y.LControlScale=jt,y.LControlZoom=vt,y.LFeatureGroup=Ct,y.LGeoJson=Pt,y.LGridLayer=wt,y.LIcon=Bt,y.LImageOverlay=Gt,y.LLayerGroup=At,y.LMap=zt,y.LMarker=Dt,y.LPolygon=Et,y.LPolyline=Ht,y.LPopup=Kt,y.LRectangle=Qt,y.LTileLayer=Xt,y.LTooltip=xt,y.LWmsTileLayer=to,y.Utilities=nt,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})});
